<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Page</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="logo"></div>
        <h1>Game Stopwatch</h1>
        <div id="stopwatch">00:00</div>
        <div class="reset-container">
            <button id="startStopButton">Start Stopwatch</button>
        </div>
    </div>

    <script>
        const stopwatchDisplay = document.getElementById('stopwatch');
        const startStopButton = document.getElementById('startStopButton');

        let timer;
        let startTime;
        let elapsedTime = 0;
        let isRunning = false; // Variable to track if the stopwatch is running

        function formatTime(ms) {
            const seconds = Math.floor(ms / 1000);
            const milliseconds = Math.floor(ms % 1000 / 10); // Convert milliseconds to two-digit format
            return `${String(seconds).padStart(2, '0')}:${String(milliseconds).padStart(2, '0')}`;
        }

        function updateStopwatch() {
            elapsedTime = new Date().getTime() - startTime;
            stopwatchDisplay.textContent = formatTime(elapsedTime);
        }

        startStopButton.addEventListener('click', () => {
            if (!isRunning) {
                // Start the stopwatch
                startTime = new Date().getTime() - elapsedTime; // Adjust for any existing elapsed time
                timer = setInterval(updateStopwatch, 10); // Update every 10 milliseconds
                startStopButton.textContent = 'Stop Stopwatch'; // Change button text to 'Stop Stopwatch'
                isRunning = true; // Set the stopwatch as running
            } else {
                // Stop the stopwatch
                clearInterval(timer);
                startStopButton.textContent = 'Start Stopwatch'; // Change button text to 'Start Stopwatch'
                isRunning = false; // Set the stopwatch as stopped

                // Save the score automatically
                const username = localStorage.getItem('username');
                const score = elapsedTime;
                const scores = JSON.parse(localStorage.getItem('scores')) || [];
                scores.push({ username, score });
                localStorage.setItem('scores', JSON.stringify(scores));

                // Redirect to the results page after 2 seconds
                setTimeout(() => {
                    window.location.href = 'results.html'; // Replace with your target URL
                }, 2000); // 2000 milliseconds = 2 seconds
            }
        });

        resetButton.addEventListener('click', () => {
            clearInterval(timer);
            elapsedTime = 0;
            stopwatchDisplay.textContent = formatTime(elapsedTime);
            startStopButton.textContent = 'Start Stopwatch'; // Reset button text
            startStopButton.disabled = false;
            isRunning = false; // Set the stopwatch as stopped
        });
    </script>
</body>
</html>
